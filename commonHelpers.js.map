{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/error-icon.svg';\n\nlet userSelectedDate = '';\n\nconst input = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nconst outputSeconds = document.querySelector('span[data-seconds]');\nconst outputMinutes = document.querySelector('span[data-minutes]');\nconst outputHours = document.querySelector('span[data-hours]');\nconst outputDays = document.querySelector('span[data-days]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (userSelectedDate.getTime() <= Date.now()) {\n      // window.alert('Please choose a date in the future');\n\n      iziToast.show({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        backgroundColor: '#B51B1B',\n        messageColor: '#FFFFFF',\n        position: 'topRight',\n        theme: 'dark',\n        iconUrl: errorIcon\n      });\n\n      startButton.classList.remove('active-button');\n    } else {\n      startButton.classList.add('active-button');\n\n      console.log(userSelectedDate);\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nstartButton.addEventListener('click', startTimer);\n\nfunction startTimer() {\n  if (!startButton.classList.contains('active-button')) {\n    return;\n  }\n\n  startButton.classList.remove('active-button');\n  input.setAttribute('disabled', 'disabled');\n\n  function start() {\n    const currentTime = Date.now();\n    let timeLeft = userSelectedDate - currentTime;\n\n    function pad(value) {\n      return String(value).padStart(2, '0');\n    }\n\n    let totalTime = convertMs(timeLeft);\n\n    const seconds = pad(totalTime.seconds);\n    const minutes = pad(totalTime.minutes);\n    const hours = pad(totalTime.hours);\n    const days = pad(totalTime.days);\n\n    outputSeconds.innerHTML = seconds;\n    outputMinutes.innerHTML = minutes;\n    outputHours.innerHTML = hours;\n    outputDays.innerHTML = days;\n\n    // convert\n    function convertMs(ms) {\n      // Number of milliseconds per unit of time\n      const second = 1000;\n      const minute = second * 60;\n      const hour = minute * 60;\n      const day = hour * 24;\n\n      // Remaining days\n      const days = Math.floor(ms / day);\n      // Remaining hours\n      const hours = Math.floor((ms % day) / hour);\n      // Remaining minutes\n      const minutes = Math.floor(((ms % day) % hour) / minute);\n      // Remaining seconds\n      const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n      return { days, hours, minutes, seconds };\n    }\n\n    // convert\n\n    if (timeLeft <= 0) {\n      clearInterval(timerInterval);\n      outputSeconds.innerHTML = '00';\n      outputMinutes.innerHTML = '00';\n      outputHours.innerHTML = '00';\n      outputDays.innerHTML = '00';\n      input.removeAttribute('disabled');\n    }\n  }\n\n  const timerInterval = setInterval(start, 1000);\n}\n"],"names":["userSelectedDate","input","startButton","outputSeconds","outputMinutes","outputHours","outputDays","options","selectedDates","iziToast","errorIcon","flatpickr","startTimer","start","currentTime","timeLeft","pad","value","totalTime","convertMs","seconds","minutes","hours","days","ms","timerInterval"],"mappings":"+IAMA,IAAIA,EAAmB,GAEvB,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAgB,SAAS,cAAc,oBAAoB,EAC3DC,EAAgB,SAAS,cAAc,oBAAoB,EAC3DC,EAAc,SAAS,cAAc,kBAAkB,EACvDC,EAAa,SAAS,cAAc,iBAAiB,EAErDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBR,EAAmBQ,EAAc,CAAC,EAE9BR,EAAiB,QAAO,GAAM,KAAK,IAAG,GAGxCS,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,gBAAiB,UACjB,aAAc,UACd,SAAU,WACV,MAAO,OACP,QAASC,CACjB,CAAO,EAEDR,EAAY,UAAU,OAAO,eAAe,IAE5CA,EAAY,UAAU,IAAI,eAAe,EAEzC,QAAQ,IAAIF,CAAgB,EAE/B,CACH,EAEAW,EAAU,mBAAoBJ,CAAO,EAErCL,EAAY,iBAAiB,QAASU,CAAU,EAEhD,SAASA,GAAa,CACpB,GAAI,CAACV,EAAY,UAAU,SAAS,eAAe,EACjD,OAGFA,EAAY,UAAU,OAAO,eAAe,EAC5CD,EAAM,aAAa,WAAY,UAAU,EAEzC,SAASY,GAAQ,CACf,MAAMC,EAAc,KAAK,MACzB,IAAIC,EAAWf,EAAmBc,EAElC,SAASE,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAED,IAAIC,EAAYC,EAAUJ,CAAQ,EAElC,MAAMK,EAAUJ,EAAIE,EAAU,OAAO,EAC/BG,EAAUL,EAAIE,EAAU,OAAO,EAC/BI,EAAQN,EAAIE,EAAU,KAAK,EAC3BK,EAAOP,EAAIE,EAAU,IAAI,EAE/Bf,EAAc,UAAYiB,EAC1BhB,EAAc,UAAYiB,EAC1BhB,EAAY,UAAYiB,EACxBhB,EAAW,UAAYiB,EAGvB,SAASJ,EAAUK,EAAI,CAQrB,MAAMD,EAAO,KAAK,MAAMC,EAAK,KAAG,EAE1BF,EAAQ,KAAK,MAAOE,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAD,EAAM,MAAAD,EAAO,QAAAD,EAAS,QAAAD,CAAO,CACvC,CAIGL,GAAY,IACd,cAAcU,CAAa,EAC3BtB,EAAc,UAAY,KAC1BC,EAAc,UAAY,KAC1BC,EAAY,UAAY,KACxBC,EAAW,UAAY,KACvBL,EAAM,gBAAgB,UAAU,EAEnC,CAED,MAAMwB,EAAgB,YAAYZ,EAAO,GAAI,CAC/C"}